function tagSuggest(e,t,n){const r=document.querySelector(`#${t}-search`);let o=r.value.trim().split(" ");const a=o[o.length-1],c=document.querySelector(`#${t}-menu`);clearDropDown(t),fetch(`${e}/api/tags?match=${a}`).then((e=>e.json())).then((e=>{let o=e.returned.results;o.sort(((e,t)=>e.indexOf(a)-t.indexOf(a))),o.forEach((e=>{let o=document.createElement("li"),a=document.createElement("a");a.classList.add("dropdown-item"),o.classList.add(`${t}-menu-item`),a.href="#",a.onclick=o=>{if(n){let n=r.value.trim().split(" ");n[n.length-1]=e,r.value=`${n.join(" ")} `,clearDropDown(t),r.focus()}else r.value=e,r.focus()},a.textContent=e,o.appendChild(a),c.appendChild(o)}))}))}function putPostToAPI(e,t,n,r){const o=new FormData(document.getElementById("script-target")),a=document.getElementById("banners");clearBanners(),fetch(`${e}${t}`,{method:n,body:o}).then((e=>e.json())).then((t=>{t.errors.forEach((e=>{a.appendChild(makeBanner("er-color",e))})),t.successes.forEach((e=>{a.appendChild(makeBanner("gd-color",e))})),t.messages.forEach((e=>{a.appendChild(makeBanner("ms-color",e))})),r&&r(t.returned),t.returned&&delayRedirect(`${e}/search`,1500)}))}function getDeleteFromAPI(e,t,n,r){const o=new FormData(document.getElementById("script-target")),a=document.getElementById("banners");clearBanners();let c=new URLSearchParams(o).toString();fetch(`${e}${t}?${c}`,{method:n,body:o}).then((e=>e.json())).then((t=>{t.errors.forEach((e=>{a.appendChild(makeBanner("er-color",e))})),t.successes.forEach((e=>{a.appendChild(makeBanner("gd-color",e))})),t.messages.forEach((e=>{a.appendChild(makeBanner("ms-color",e))})),r&&r(t.returned),t.returned&&delayRedirect(`${e}/search`,2500)}))}function showHideHL(e,t){let n="Color"==document.getElementById(`${e}A`).value;document.getElementById(`${e}B-row`).hidden=!n,document.getElementById(`${e}C-row`).hidden=n&&t}function makeBanner(e,t){let n=document.createElement("div");return n.classList.add("banner"),n.classList.add("p-3"),n.classList.add("mb-2"),n.classList.add("text-center"),n.classList.add(e),n.textContent=t,n}function clearDropDown(e){document.querySelectorAll(`.${e}-menu-item`).forEach((e=>{e.remove()}))}function clearBanners(){document.querySelectorAll(".banner").forEach((e=>{e.remove()}))}function delayRedirect(e,t){return console.log("redirecting"),new Promise(((n,r)=>{setTimeout((()=>{n(window.location.href=e)}),t)}))}