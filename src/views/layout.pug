block variables
doctype html
html
    -
        var navItems = [
            {
                0: ['Home', ''],
                1: ['Search', '/search'],
                2: ['Tags', '/search/tags'],
                3: ['Tag Types', '/search/tagTypes']
            },
            {
                4: ['New Item', '/post/item'],
                5: ['New Tag', '/post/tag']
            },
            {
                6: ['New TagType', '/post/tagType'],
                7: ['Manage Users', '/userCenter'],
                8: ['New User', '/post/user']
            }
        ]
    -level = user != undefined ? user.role : '0';
    head
        meta(charset='utf-8')
        meta(name="viewport" content="width=device-width, initial-scale=1")
        link(rel='shortcut icon', href='/favicon.ico')
        link(rel="stylesheet", type='text/css', href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css")
        script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js")
        link(rel='stylesheet', type='text/css', href='/css/main.css')
        - if(styles.length > 0)
            each style in styles
                link(rel='stylesheet', type='text/css', href=`/css/${style}.css`)
        meta(name='viewport', content='width=device-width, initial-scale=1, shrink-to-fit=no')
        meta(name='theme-color', content='#000000')
        title #{title} | TagSearch
    body
        div#root.container-fluid
            header.container-fluid.pt-5
                h1#title= title
                div#searchSection.row
                    div.col-sm-1
                    div.col-sm-6.row.align-items-center
                        div.right.col-sm-3
                            span#searchLabel Search
                        div.col-sm-6
                            input#searchBar.field(type='text' name='search', value=search)
                        div.col-sm-3
                            button#searchButton.button(onclick=`window.location.href='${baseURL}/search?tags='+document.getElementById('searchBar').value.replace(' ', '+');`) Go
                    div.col-sm-5
                nav.row
                    div#navSection.col-sm-10
                        each group, security in navItems
                            div.navGroup
                                each pair, index in group
                                    -if(index != page)
                                        -if(security <= +level)
                                            a.button.navItem(href=`${baseURL}${pair[1]}`)= pair[0]
                                    -else
                                        span.button.navItem.navSelected= pair[0]
                    div#loginSection.col-sm-2
                        -if(user == undefined)
                            -if(page == 101)
                                span.navItem.navSelected Login
                            -else
                                a.button.navItem(href=`${baseURL}/login`) Log In
                        -else
                            span= user.username
                            -if(page == 102)
                                span.button.navItem.navSelected Change Password
                            -else
                                a.button.navItem(href=`${baseURL}/login/change`) Change Password
                            a.button.navItem(href=`${baseURL}/logout`) Log Out
            div#banners
                each error in errors
                    div.error= error
                each success in successes
                    div.success= success
                each message in messages
                    div.message= message
            h3#legend= legend
            block layout-content
            -if(pages.active)
                -if(pages.pageNumber <= 0)
                    -pages.pageNumber = 1
                -if(pages.pageCount <= 0)
                    -pages.pageCount = 1
                div#pageNumbers
                    -if(pages.pageNumber != 1)
                        a.button(href=`${pages.pageURL}${1}`)= '<<'
                        a.button(href=`${pages.pageURL}${pages.pageNumber - 1}`)= '<'
                    -if(pages.pageCount <= 10)
                        -i = 1;
                        while i <= pages.pageCount
                            -if(i == pages.pageNumber)
                                span= i++
                            -else
                                -n = i++;
                                a.button(href=`${pages.pageURL}${n}`)= n
                    -else
                        -if(pages.pageNumber <= 5)
                            -i = 1;
                        -else
                            -i = pages.pageNumber - 5
                        -if(pages.pageNumber >= pages.pageCount - 5)
                            -t = pages.pageCount
                        -else
                            -t = pages.pageNumber + 5
                        while i <= t
                            -if(i == pages.pageNumber)
                                span= i++
                            -else
                                -n = i++;
                                a.button(href=`${pages.pageURL}${n}`)= n
                    -if(pages.pageNumber != pages.pageCount)
                        a.button(href=`${pages.pageURL}${pages.pageNumber + 1}`)= '>'
                        a.button(href=`${pages.pageURL}${pages.pageCount}`)= '>>'